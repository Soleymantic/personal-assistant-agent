<div class="page">
  <header class="app-header">
    <div class="brand-row">
      <div class="brand">BÃ¼rokratie-Assistent</div>
      <button class="theme-toggle" type="button" (click)="toggleTheme()" [attr.aria-label]="theme() === 'dark' ? 'Lichtmodus aktivieren' : 'Dunkelmodus aktivieren'">
        <span class="icon" aria-hidden="true">{{ theme() === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸' }}</span>
        <span class="label">{{ theme() === 'dark' ? 'Dark' : 'Light' }}</span>
      </button>
    </div>
    <app-filter-bar
      [searchTerm]="inbox.searchTerm()"
      [selectedTags]="inbox.selectedTags()"
      [availableTags]="inbox.availableTags"
      (searchChange)="inbox.setSearch($event)"
      (toggleTag)="inbox.toggleTag($event)"
    />
    <app-status-filter
      [activeStatus]="inbox.activeStatus()"
      (setStatus)="inbox.setStatus($event)"
    />
  </header>

  <main class="layout">
    <app-inbox-column
      title="Pending"
      [items]="inbox.pendingItems()"
      accent="warning"
      [selectedId]="inbox.selectedItem()?.id ?? null"
      (selectItem)="inbox.selectItem($event)"
    />

    <app-inbox-column
      title="Needs Action"
      [items]="inbox.needsActionItems()"
      accent="danger"
      [selectedId]="inbox.selectedItem()?.id ?? null"
      (selectItem)="inbox.selectItem($event)"
    />

    <app-inbox-column
      title="Paid"
      [items]="inbox.paidItems()"
      accent="success"
      [selectedId]="inbox.selectedItem()?.id ?? null"
      (selectItem)="inbox.selectItem($event)"
    />

    <app-detail-panel
      [document]="inbox.selectedItem()"
      (pay)="applyAction('pay')"
      (reply)="applyAction('reply')"
    />
  </main>
</div>
